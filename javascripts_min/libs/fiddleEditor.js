define(["CodeMirror","MySQLCodeMirror"],function(e,t){var n=function(t,n,r){return this.codeMirrorSupported=!/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent),this.codeMirrorSupported?this.codeMirror=e.fromTextArea(document.getElementById(t),{mode:"mysql",extraKeys:{Tab:"indentMore"},lineNumbers:!0,onChange:function(){n.call(r)}}):(this.textArea=document.getElementById(t),$(this.textArea).on("change",function(){n.call(r)}),$(this.textArea).on("keyup",function(){n.call(r)}),$(this.textArea).attr("fullscreen",!1)),this};return n.prototype.getValue=function(){return this.codeMirrorSupported?this.codeMirror.getValue():this.textArea.value},n.prototype.setValue=function(e){this.codeMirrorSupported?this.codeMirror.setValue(e):(this.textArea.value=e,$(this.textArea).trigger("change"))},n.prototype.refresh=function(){this.codeMirrorSupported&&this.codeMirror.refresh()},n.prototype.somethingSelected=function(){return this.codeMirrorSupported?this.codeMirror.somethingSelected():!1},n.prototype.getSelection=function(){return this.codeMirrorSupported?this.codeMirror.getSelection():this.textArea.value},n.prototype.getScrollerElement=function(){return this.codeMirrorSupported?this.codeMirror.getScrollerElement():null},n.prototype.getGutterElement=function(){return this.codeMirrorSupported?this.codeMirror.getGutterElement():null},n.prototype.isFullscreen=function(){return this.codeMirrorSupported?$(this.codeMirror.getScrollerElement()).hasClass("CodeMirror-fullscreen"):$(this.textArea).attr("fullscreen")==1},n.prototype.setFullscreen=function(e){if(e){var t=$(window).height()-40;this.codeMirrorSupported?($(this.codeMirror.getScrollerElement()).addClass("CodeMirror-fullscreen").height(t),$(this.codeMirror.getGutterElement()).height(t)):($(this.textArea).addClass("fullscreen"),$(this.textArea).height(t),$(this.textArea).attr("fullscreen",e))}else this.codeMirrorSupported?($(this.codeMirror.getScrollerElement()).removeClass("CodeMirror-fullscreen"),$(this.codeMirror.getGutterElement()).css("height","auto"),$(this.codeMirror.getScrollerElement()).css("height","200px")):($(this.textArea).removeClass("fullscreen"),$(this.textArea).height(100),$(this.textArea).attr("fullscreen",e))},n})