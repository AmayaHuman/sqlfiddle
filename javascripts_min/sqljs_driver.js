window.SQLjs_driver=function(){return this.db=null,this},$.extend(window.SQLjs_driver.prototype,window.SQLite_driver.prototype),window.SQLjs_driver.prototype.buildSchema=function(e){var t=this;try{var n=function(){t.db=SQL.open(),$.each(window.SQLite_driver.prototype.splitStatement.call(this,e.ddl,e.statement_separator),function(e,n){t.db.exec(n)}),e.success()};window.SQL===undefined?$.getScript("javascripts_static/sql.js",function(e,t,r){n()}).fail(function(t,n,r){e.error("Your browser does not work with SQL.js.  Try using a different browser (Chrome, Safari, Firefox, IE 10, etc...), or a newer version of your current one.")}):(t.db&&t.db.close(),n())}catch(r){e.error(r)}},window.SQLjs_driver.prototype.executeQuery=function(e){var t=this;try{if(!t.db)throw"Database Schema not available!";var n=[];t.db.exec("BEGIN TRANSACTION"),$.each(window.SQLite_driver.prototype.splitStatement.call(this,e.sql,e.statement_separator),function(e,r){if($.trim(r).length){var i=new Date,s=[];try{s=t.db.exec(r);var o={SUCCEEDED:!0,EXECUTIONTIME:new Date-i,RESULTS:{COLUMNS:[],DATA:[]},EXECUTIONPLAN:{COLUMNS:[],DATA:[]}};s.length&&$.each(s,function(e,t){var n=[];$.each(t,function(t,r){e==0&&o.RESULTS.COLUMNS.push(r.column),n.push(r.value)}),o.RESULTS.DATA.push(n)});try{exectionPlanArray=t.db.exec("EXPLAIN QUERY PLAN "+r),exectionPlanArray.length&&$.each(exectionPlanArray,function(e,t){var n=[];$.each(t,function(t,r){e==0&&o.EXECUTIONPLAN.COLUMNS.push(r.column),n.push(r.value)}),o.EXECUTIONPLAN.DATA.push(n)})}catch(u){}n.push(o)}catch(u){var o={SUCCEEDED:!1,EXECUTIONTIME:new Date-i,ERRORMESSAGE:u};return n.push(o),!1}}}),t.db.exec("ROLLBACK TRANSACTION"),e.success(n)}catch(r){e.error(r)}}